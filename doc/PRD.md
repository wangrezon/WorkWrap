# WorkWrap 产品需求文档 (PRD)

> 版本: v1.0  
> 更新日期: 2026-01-06  
> 状态: 草稿

---

## 1. 产品概述

### 1.1 产品定位

**WorkWrap** 是一款面向开发者的智能工作效率工具，通过集成 Git 版本控制与大语言模型（LLM），自动化生成 Commit Message、工作日报和工作周报，帮助开发者从繁琐的文档撰写工作中解放出来。

### 1.2 目标用户

- 软件开发工程师（个人开发者、团队成员）

### 1.3 核心价值主张

> **「写代码是你的事，写汇报是 AI 的事」**
>
> 让开发者专注于创造价值的代码工作，把繁琐的工作汇报交给 AI 自动完成。

| 痛点                                 | 解决方案                                       |
| ------------------------------------ | ---------------------------------------------- |
| 编写 Commit Message 耗时且风格不统一 | AI 自动分析代码变更，生成规范的 Commit Message |
| 每日/每周撰写工作报告繁琐重复        | 基于实际 Git 提交记录，自动生成结构化报告      |
| 工作内容回忆困难，容易遗漏           | 自动汇总代码变更，确保报告完整性               |
| 汇报占用宝贵编码时间                 | 一行命令，秒级生成，专注回归代码本身           |

---

## 2. 产品架构

```
┌─────────────────────────────────────────────────────────────┐
│                        WorkWrap 产品架构                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌─────────────┐         ┌─────────────────────────────┐  │
│   │  CLI 工具   │ ◄─────► │        Web 平台              │  │
│   │  (Node.js)  │         │  ┌─────┐ ┌────┐ ┌────────┐  │  │
│   └─────────────┘         │  │落地页│ │登录│ │个人中心│  │  │
│         │                 │  └─────┘ └────┘ └────────┘  │  │
│         ▼                 └─────────────────────────────────┘  │
│   ┌─────────────┐                       │                   │
│   │   Git 仓库   │                       │                   │
│   └─────────────┘                       ▼                   │
│         │                 ┌─────────────────────────────┐  │
│         └────────────────►│       LLM 服务层             │  │
│                           └─────────────────────────────┘  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 用户旅程

### 3.1 首次使用流程

```
用户安装 CLI ──► 首次执行命令 ──► 自动打开浏览器 ──► 登录/注册
                                                      │
      ◄──────── 返回 CLI 继续使用 ◄──── 完成个性化配置 ◄─┘
```

### 3.2 日常使用流程

```
┌──────────────────────────────────────────────────────────────┐
│                        Commit Message 生成                    │
├──────────────────────────────────────────────────────────────┤
│  执行命令 ──► 获取未提交代码 ──► AI 分析生成 ──► 展示结果      │
│                                                    │         │
│                               询问是否自动提交 ◄────┘         │
│                                    │                         │
│                         ┌─────────┴─────────┐                │
│                         ▼                   ▼                │
│                      [是] 执行提交      [否] 结束             │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│                         日报/周报生成                         │
├──────────────────────────────────────────────────────────────┤
│  执行命令 ──► 获取 Git 记录 ──► AI 汇总分析 ──► 输出报告       │
│              (未提交 + 已提交)                                │
└──────────────────────────────────────────────────────────────┘
```

---

## 4. 功能需求

### 4.1 CLI 工具功能

#### 4.1.1 智能 Commit Message 生成

| 需求项       | 描述                                                                                                                                                       |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **功能名称** | 智能 Commit Message 生成                                                                                                                                   |
| **触发方式** | 命令行执行指定命令（如 `workwrap commit`）                                                                                                                 |
| **前置条件** | 当前目录为 Git 仓库，存在未提交的代码变更                                                                                                                  |
| **输入**     | Git 暂存区/工作区的代码变更（diff）                                                                                                                        |
| **处理逻辑** | 1. 检测当前是否为 Git 仓库<br>2. 获取未提交的代码变更<br>3. 调用 LLM 分析变更内容<br>4. 生成符合规范的 Commit Message<br>5. 展示生成结果并询问是否自动提交 |
| **输出**     | 结构化的 Commit Message                                                                                                                                    |
| **用户确认** | 展示生成的 Message 后询问用户是否执行 `git commit`                                                                                                         |

**Commit Message 输出格式要求：**

- 支持 Conventional Commits 规范
- 包含类型（feat/fix/docs/style/refactor/test/chore 等）
- 可选的 scope
- 简洁的描述
- 可选的详细说明

#### 4.1.2 工作日报生成

| 需求项       | 描述                                                                                                         |
| ------------ | ------------------------------------------------------------------------------------------------------------ |
| **功能名称** | 工作日报自动生成                                                                                             |
| **触发方式** | 命令行执行指定命令（如 `workwrap daily`）                                                                    |
| **数据来源** | 1. 当前未提交的代码变更<br>2. 当天当前用户的所有已提交记录                                                   |
| **时间范围** | 当天 00:00 至当前时刻                                                                                        |
| **用户识别** | 基于 Git 配置的 user.name 和 user.email                                                                      |
| **输出内容** | 结构化的工作日报，包含：<br>• 今日完成的工作<br>• 进行中的工作<br>• 遇到的问题（可选）<br>• 明日计划（可选） |

#### 4.1.3 工作周报生成

| 需求项       | 描述                                                                                                          |
| ------------ | ------------------------------------------------------------------------------------------------------------- |
| **功能名称** | 工作周报自动生成                                                                                              |
| **触发方式** | 命令行执行指定命令（如 `workwrap weekly`）                                                                    |
| **数据来源** | 1. 当前未提交的代码变更<br>2. 本周当前用户的所有已提交记录                                                    |
| **时间范围** | 本周一 00:00 至当前时刻（或自定义周起始日）                                                                   |
| **用户识别** | 基于 Git 配置的 user.name 和 user.email                                                                       |
| **输出内容** | 结构化的工作周报，包含：<br>• 本周工作总结<br>• 完成的主要功能/任务<br>• 解决的问题<br>• 下周工作计划（可选） |

---

### 4.2 Web 平台功能

#### 4.2.1 落地页

| 需求项       | 描述                                                                                                                        |
| ------------ | --------------------------------------------------------------------------------------------------------------------------- |
| **页面目的** | 产品展示与用户转化                                                                                                          |
| **核心内容** | • 产品 Slogan 与价值主张<br>• 核心功能介绍<br>• 使用演示/截图<br>• 快速开始引导<br>• 定价方案（可选）<br>• 用户评价（可选） |
| **行动号召** | • 免费试用按钮<br>• 登录/注册入口<br>• CLI 安装指引                                                                         |
| **设计要求** | 现代简洁风格，突出开发者工具属性                                                                                            |

#### 4.2.2 用户登录/注册

**登录即注册**：用户无需单独注册流程，首次登录自动创建账户。

| 需求项       | 描述                                                                                                                                                                        |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **登录方式** | • 邮箱验证码登录（输入邮箱 → 发送验证码 → 输入验证码 → 登录成功）<br>• GitHub OAuth OAuth                                                                                   |
| **邮箱绑定** | 通过 GitHub 第三方登录的用户）                                                                                                                                              |
| **登录流程** | 1. 选择登录方式<br>2. 完成验证/授权<br>3. 新用户自动创建账户<br>4. 第三方登录用户跳转邮箱绑定页面<br>5. 进入个性化配置（首次登录）或直接进入应用                            |
| **安全要求** | • 邮箱验证码有效期 5 分钟<br>• 验证码发送频率限制（60 秒内不可重复发送）<br>• 验证码错误次数限制（连续 5 次错误后锁定 15 分钟）<br>• OAuth 授权范围最小化（仅获取必要信息） |
| **记住登录** | 支持"记住我"功能，合理设置 Token 有效期                                                                                                                                     |

#### 4.2.3 个人中心

**基础信息管理**

| 功能项   | 描述                                      |
| -------- | ----------------------------------------- |
| 头像设置 | 上传或使用 OAuth 头像                     |
| 昵称修改 | 显示名称                                  |
| 邮箱管理 | 查看/修改绑定邮箱（修改需验证码二次确认） |
| 账户绑定 | 管理 GitHub 第三方账户绑定                |
| 账户注销 | 永久删除账户及数据（需邮箱验证码确认）    |

**Token 余额与充值**

| 功能项   | 描述                                      |
| -------- | ----------------------------------------- |
| 余额显示 | 实时展示当前 Token 余额                   |
| 使用记录 | 查看 Token 消耗明细（时间、功能、消耗量） |
| 充值入口 | 跳转至充值/购买页面                       |
| 套餐展示 | 显示可购买的 Token 套餐                   |
| 支付方式 | 支付宝 / 微信支付 / 信用卡                |
| 订单记录 | 查看历史充值订单                          |
| 发票申请 | 支持开具发票（可选）                      |

**Token 套餐设计建议**

| 套餐   | Token 数量 | 价格  | 适用场景           |
| ------ | ---------- | ----- | ------------------ |
| 体验版 | 1,000      | 免费  | 新用户首次注册赠送 |
| 基础版 | 10,000     | ¥9.9  | 个人轻度使用       |
| 标准版 | 50,000     | ¥39.9 | 个人日常使用       |
| 专业版 | 200,000    | ¥129  | 重度用户/小团队    |
| 团队版 | 1,000,000  | ¥499  | 团队协作使用       |

---

### 4.3 个性化配置

#### 首次使用配置向导

用户首次登录后，引导完成以下配置：

| 配置项          | 说明                      | 选项/输入                               | 默认值               |
| --------------- | ------------------------- | --------------------------------------- | -------------------- |
| **界面语言**    | 系统界面语言              | 简体中文 / English / 日本語             | 跟随系统             |
| **输出语言**    | AI 生成内容的语言         | 简体中文 / English / 日本語 / 跟随界面  | 跟随界面             |
| **Commit 规范** | Commit Message 遵循的规范 | Conventional Commits / Angular / 自定义 | Conventional Commits |
| **Commit 语言** | Commit Message 的语言     | 中文 / English / 跟随输出语言           | English              |
| **日报模板**    | 工作日报的结构模板        | 标准模板 / 简洁模板 / 详细模板 / 自定义 | 标准模板             |
| **周报模板**    | 工作周报的结构模板        | 标准模板 / 简洁模板 / 详细模板 / 自定义 | 标准模板             |
| **周起始日**    | 周报计算的起始日          | 周一 / 周日                             | 周一                 |
| **工作时段**    | 统计的工作时间范围        | 自定义起止时间 / 全天                   | 全天                 |

#### 高级配置（个人中心可调整）

| 配置项           | 说明                         | 选项/输入                             |
| ---------------- | ---------------------------- | ------------------------------------- |
| **AI 模型偏好**  | 使用的 LLM 模型              | GPT-4 / GPT-3.5 / Claude / 其他       |
| **输出风格**     | 文本的表达风格               | 专业正式 / 轻松简洁 / 技术详细        |
| **项目信息**     | 默认的项目名称、描述         | 文本输入                              |
| **团队信息**     | 团队名称（用于报告落款）     | 文本输入                              |
| **排除路径**     | Git diff 时排除的文件路径    | 路径模式列表（如 `*.lock`, `dist/*`） |
| **自定义提示词** | 追加到 AI 提示词的自定义内容 | 文本输入                              |
| **自动复制**     | 生成后自动复制到剪贴板       | 开启 / 关闭                           |
| **历史保存**     | 保存生成历史记录             | 开启 / 关闭                           |

---

## 5. 非功能需求

### 5.1 性能要求

| 指标         | 要求                                              |
| ------------ | ------------------------------------------------- |
| CLI 响应时间 | 命令执行到开始请求 LLM < 1 秒                     |
| AI 生成时间  | Commit Message < 5 秒，日报 < 10 秒，周报 < 15 秒 |
| 网页加载时间 | 首屏加载 < 2 秒                                   |
| 并发支持     | 支持 1000+ 用户同时使用                           |

### 5.2 安全要求

| 方面     | 要求                                          |
| -------- | --------------------------------------------- |
| 数据传输 | 全程 HTTPS 加密                               |
| 代码数据 | 仅传输 diff 信息，不存储用户源代码            |
| 用户认证 | JWT Token + Refresh Token 机制                |
| 敏感信息 | 检测并过滤代码中的敏感信息（API Key、密码等） |
| 支付安全 | 接入正规支付渠道，符合 PCI DSS 标准           |

### 5.3 可用性要求

| 指标       | 要求                       |
| ---------- | -------------------------- |
| 服务可用性 | 99.9% SLA                  |
| 数据备份   | 每日自动备份               |
| 故障恢复   | RTO < 4 小时，RPO < 1 小时 |

---

## 6. 未来规划（Roadmap）

### Phase 1 - MVP（v1.0）

- [x] CLI 基础命令
- [x] Commit Message 生成
- [x] 日报生成
- [x] 周报生成
- [x] 落地页
- [x] 用户登录/注册
- [x] 个人中心基础功能
- [x] Token 充值

### Phase 2 - 增强（v1.5）

- [ ] 多仓库支持
- [ ] 团队协作功能
- [ ] 报告导出（Markdown / PDF / Word）
- [ ] 定时自动生成
- [ ] Slack / 钉钉 / 企业微信集成

### Phase 3 - 生态（v2.0）

- [ ] VS Code 插件
- [ ] JetBrains 插件
- [ ] GitHub Action 集成
- [ ] GitLab CI 集成
- [ ] 自定义 AI 模型接入
- [ ] 私有化部署方案

---

## 7. 附录

### 7.1 术语表

| 术语                 | 定义                               |
| -------------------- | ---------------------------------- |
| Token                | 调用 AI 服务的计量单位             |
| Commit Message       | Git 提交时的说明信息               |
| Conventional Commits | 一种 Commit Message 的书写规范     |
| LLM                  | Large Language Model，大语言模型   |
| CLI                  | Command Line Interface，命令行界面 |
| OAuth                | 开放授权协议，用于第三方登录       |

### 7.2 参考资料

- [Conventional Commits 规范](https://www.conventionalcommits.org/)
- [Git Diff 文档](https://git-scm.com/docs/git-diff)

---

## 8. 变更记录

| 版本 | 日期       | 变更内容 | 作者 |
| ---- | ---------- | -------- | ---- |
| v1.0 | 2026-01-06 | 初始版本 | -    |
